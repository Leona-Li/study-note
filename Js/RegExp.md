#### 说明

- 正则表达式是用于匹配字符串中字符组合的模式
- 这些模式被用于 RegExp 的 exec 和 test 方法
- 以及 String 的 match、replace、search、split 方法

#### 创建

- 字面量
  - /pattern/flags
  - 在加载脚本后，正则表达式字面值提供正则表达式的编译
  - 这种形式提供正则表达式的编译（compilation）状态。当在循环中使用字面量构造一个正则表达式时，正则表达式不会在每一次迭代中都被重新编译（recompiled）
  - 当正则表达式**保持不变**时，使用此方法可获得更好的性能

- RegExp对象的构造函数
  - new RegExp(pattern [, flags])。new RegExp(`'ab+c'`, 'i') 或者
new RegExp(`/ab+c/`, 'i');
  - 使用构造函数提供正则表达式的运行时编译
  - 通常用于**正则表达式模式将会改变**，或者你不知道模式，并从另一个来源
  - 从ES6开始，第一个参数为正则表达式而第二个标志参数存在时不再抛出TypeError。将使用这些参数创建一个新的正则表达式。
  - 需要常规的字符转义规则。如：new RegExp("\\\w+") 与 字面量 /\w+/ 相同

`Notes：`

  - pattern：正则表达式的文本
  - flags：说明模式中的一些匹配规则

    - g：全局匹配。找到所有匹配，而不是在第一个匹配后停止
    - i：忽略大小写
    - m：多行。将开始和结束字符（^和$）视为在多行上工作（也就是，**分别匹配每一行的开始和结束**（由 \n 或 \r 分割），而不只是只匹配整个输入字符串的最开始和最末尾处。
    - u：unicode，将模式视为unicode序列点的序列
    - y：粘性匹配。仅匹配目标字符串中此正则表达式的lastIndex属性指示的索引(并且不尝试从任何后续的索引匹配)

#### 特殊字符

1. `\`
    - 在非特殊字符前，表示下一个字符是特殊的。例如 b 和 \b
    - 在特殊字符前，将其转为字面量。如 * 和 \\*
2. `^`
    - 匹配输入的开始
    - 当多行标志 **m** 设置为 true 的时候，也匹配换行符后紧跟的位置
3. `$`
    - 匹配输入的结束
    - 如果多行标志 **m** 设置为 true 的时候，也匹配换行符前的位置
4. `*`
    - 匹配前一个表达式 **0次或多次** ，等价于 **{0,}**
5. `+`
    - 匹配前一个表达式 **1 次或多次**，等价于 **{1,}**
6. `?`
    - 匹配前一个表达式 **0次或1次**，等价于 **{0,1}**
    - 如果在数量词 *、+、? 或 {}, 任意一个后面紧跟该符号（?），会使数量词变为非贪婪，即匹配次数最小化
7. `.`
    - 匹配换行符 **(\n \r \u2028 或 \u2029)** 之外的任何单个字符
8. `(x)`
    - 匹配 x 并记住匹配项。括号被称为 捕获括号。
    - 如：/(foo) (bar) \1 \2/ 匹配  "foo bar foo bar" 。'(foo)' 和 '(bar)' 匹配并记住前两个单词，\1 和 \2 匹配字符串的后两个单词
    - `notes：` **\1、\2、\n** 用在正则表达式的匹配环节，**$1、\$2、\$n** 用在替换环节。如 'bar foo'.replace( /(...) (...)/, '$2 $1' )。
9. `(?:x)`
    - 匹配 x 但是不记住匹配项。这种叫作非捕获括号
    - 能够定义为与正则表达式运算符一起使用的子表达式。如：/(?:foo){1,2}/
10. `x(?=y)`
    - **匹配 x**， 仅仅当 x 后面跟着 y ，这种叫做正向肯定查找。 `注意这里匹配到的是 x，而不是 xy`
11. `x(?!y)`
    - `匹配 x`， 仅仅当 x 后面不跟着 y ,这个叫做正向否定查找
12. `x|y`： 匹配 x 或者 y
13. `{n}`： n是一个正整数，匹配了前面一个字符刚好发生了n次
14. `{n,m}`：n 和 m 都是整数。匹配前面的字符至少n次，最多m次。如果 n 或者 m 的值是0， 这个值被忽略
15. `[xyz]`
    - 匹配方括号的中任意字符
    - 可以使用 - 来指定字符范围，但是 **.** **\*** 这样的特殊字符在字符集中没有意义
    - `[^xyz]`：匹配任何没有包含在方括号中的字符
16. `[\b]`：匹配一个退格(U+0008)
17. `\b`
    - 匹配一个词的边界，没有任何“字”字符（[具体解释](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions#special-word-boundary)）在匹配字符的前面或者后面
    - /\bm/匹配“moon”中的‘m’
    - /oon\b/匹配"moon"中的'oon'
    - /oo\b/并不匹配"moon"中的'oo'，因为 oo 前后有字符跟随
18. `\B`
    - 匹配一个非单词边界
    - 匹配一个前后字符都是相同类型的位置：都是“字”字符或者都不是“字”字符
    - 一个字符串的开始和结尾都被认为不是“字”字符，或者空字符串
19. `\cX`：当X是处于A到Z之间的字符的时候，匹配字符串中的一个控制符
20. `\d`：匹配一个数字；`\D`：匹配一个非数字字符
21. `\f`：匹配一个换页符 (U+000C)；`\n`：匹配一个换行符 (U+000A)；`\r`：匹配一个回车符 (U+000D)
22. 空白字符
    - `\s`：匹配一个空白字符，包含空格、制表符、换页符和换行符；等价于[ \f\n\r\t\v\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]
    - `\S`：匹配一个非空白字符
23. `\t`：匹配一个水平制表符 (U+0009)；`\v`：匹配一个垂直制表符 (U+000B)
24. 单字字符
    - `\w`：匹配一个单字字符（字母、数字或者下划线），等价于[A-Za-z0-9_]
    - `\W`：匹配一个非单字字符，等价于[^A-Za-z0-9_]
25. `\n`：返回最后的第n个子捕获匹配的子字符串(捕获的数目以左括号计数)
26. 进制
   - `\xhh`：与代码 hh 匹配字符（两个十六进制数字）
   - `\xhhhh`：与代码 hhhh 匹配字符（四个十六进制数字）
   - `\u{hhhh}`：(仅当设置了u标志时) 使用Unicode值hhhh匹配字符 (十六进制数字).

#### RegExp 全局对象属性和方法

- RegExp.prototype：允许为所有正则对象添加属性
- RegExp.length：RegExp.length 值为 2
- 自身没有方法, 不过它会继承一些方法通过原型链

#### RegExp 实例

##### 属性
- RegExp.prototype.constructor：创建该正则对象的构造函数
- RegExp.prototype.global：是否开启全局匹配
- RegExp.prototype.ignoreCase：在匹配字符串时是否要忽略字符的大小写
- RegExp.prototype.lastIndex：下次匹配开始的字符串索引位置。
- RegExp.prototype.multiline：是否开启多行模式匹配
- RegExp.prototype.source：正则对象的源模式文本
- RegExp.prototype.sticky：是否开启粘滞匹配

##### 方法
- RegExp.prototype.exec()：在目标字符串中执行一次正则匹配操作

  - 返回一个数组或者 null，完全匹配成功的文本作为第一项[0]，将正则括号里匹配成功的捕获作为数组填充到后面[1]...[n]
  - 返回的 Array 拥有一个额外的 input 属性，该属性包含被解析的原始字符串
  - 还拥有一个 index 属性，该属性表示匹配结果在原字符串中的索引（以0开始）
  - 并更新正则表达式对象的属性。lastIndex：下一次匹配的位置；ignoreCase、global、multiline、source(正则匹配的字符串)
- RegExp.prototype.test()：测试当前正则是否能匹配目标字符串
- RegExp.prototype.toString()：返回一个字符串，其值为该正则对象的字面量形式

#### String 中使用 正则表达式

- str.match(regexp)
  - 传入的参数如果不是正则对象，则会被转为正则对象
  - 如果没有传入参数，该方法会返回 ['']
  - 如果匹配，不包含 g 标志，则 str.match() 会返回和 RegExp.exec() 相同的结果。包含 g 标志，则该方法返回一个 Array ，它包含所有匹配的子字符串而不是匹配对象
  - 如果没有匹配到，则返回 null

- str.search(regexp)
  - 传入的参数如果不是正则对象，则会被转为正则对象
  - 如果匹配成功，返回正则表达式在字符串中首次匹配项的索引；否则，返回 -1

- str.replace(regexp|substr, newSubStr|function)
  - 返回一个由替换值替换一些或所有匹配的模式后的新字符串。 **原字符串不会改变**
